import{j as e}from"./ui-DrjZcVPk.js";import{u as F,k as D,b as o}from"./vendor-DWqeVyvT.js";import{u as L}from"./useProducts-Co3d_dAY.js";import{c as f,B as g,C as T,a as E,P as M}from"./index-CPXgTZqr.js";import{B as N}from"./badge-BBs-Ut3W.js";import{S as v,a as b,b as w,c as y,d as t}from"./select-DJNuIx2U.js";import{I as q}from"./ImageWithFallback-uq_ObecN.js";import{C as I}from"./chevron-left-NpBrcDAY.js";import"./supabase-DiJShdzZ.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]],U=f("arrow-up-narrow-wide",H);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],V=f("funnel",$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],W=f("search",R);function ee(){const d=F(),[m]=D(),{products:h,loading:k,fetchPublishedProducts:C,fetchProductsByCarCompatibility:P}=L(),l=m.get("year"),i=m.get("make"),c=m.get("model"),n=m.get("trim"),[p,S]=o.useState("newest"),[u,_]=o.useState("all"),[x,B]=o.useState([]);o.useEffect(()=>{l||i||c||n?P({year:l,make:i,model:c,trim:n}):C()},[l,i,c,n]),o.useEffect(()=>{if(!h.length)return;let s=[...h];switch(u!=="all"&&(s=s.filter(a=>{const r=a.title.toLowerCase();switch(a.description?.toLowerCase(),u){case"interior":return r.includes("interior")||r.includes("dash")||r.includes("trim");case"exterior":return r.includes("exterior")||r.includes("body")||r.includes("bumper");case"engine":return r.includes("engine")||r.includes("turbo")||r.includes("intake");case"performance":return r.includes("performance")||r.includes("sport")||r.includes("racing");default:return!0}})),p){case"newest":s.sort((a,r)=>new Date(r.created_at).getTime()-new Date(a.created_at).getTime());break;case"oldest":s.sort((a,r)=>new Date(a.created_at).getTime()-new Date(r.created_at).getTime());break;case"price-low":s.sort((a,r)=>(a.price||0)-(r.price||0));break;case"price-high":s.sort((a,r)=>(r.price||0)-(a.price||0));break;case"popular":s.sort((a,r)=>new Date(r.created_at).getTime()-new Date(a.created_at).getTime());break}B(s)},[h,p,u,l,i,c,n]);const A=s=>{d(`/product/${s}`)},j=()=>{if(!l&&!i&&!c)return"All Cars";const s=[];return l&&s.push(l),i&&s.push(i),c&&s.push(c),n&&s.push(n),s.join(" ")};return k?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-1/3"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(8)].map((s,a)=>e.jsx("div",{className:"h-64 bg-muted rounded"},a))})]})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs(g,{variant:"outline",onClick:()=>d("/"),className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),"Back to Home"]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Parts for ",j()]}),e.jsxs("p",{className:"text-muted-foreground",children:[x.length," ",x.length===1?"part":"parts"," found"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-6 p-4 bg-card border border-border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Filter:"}),e.jsxs(v,{value:u,onValueChange:s=>_(s),children:[e.jsx(b,{className:"w-[140px]",children:e.jsx(w,{})}),e.jsxs(y,{children:[e.jsx(t,{value:"all",children:"All Categories"}),e.jsx(t,{value:"interior",children:"Interior"}),e.jsx(t,{value:"exterior",children:"Exterior"}),e.jsx(t,{value:"engine",children:"Engine"}),e.jsx(t,{value:"performance",children:"Performance"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Sort:"}),e.jsxs(v,{value:p,onValueChange:s=>S(s),children:[e.jsx(b,{className:"w-[140px]",children:e.jsx(w,{})}),e.jsxs(y,{children:[e.jsx(t,{value:"newest",children:"Newest First"}),e.jsx(t,{value:"oldest",children:"Oldest First"}),e.jsx(t,{value:"price-low",children:"Price: Low to High"}),e.jsx(t,{value:"price-high",children:"Price: High to Low"}),e.jsx(t,{value:"popular",children:"Most Popular"})]})]})]})]}),x.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-muted rounded-full flex items-center justify-center mb-4",children:e.jsx(W,{className:"h-12 w-12 text-muted-foreground"})}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No Parts Found"}),e.jsxs("p",{className:"text-muted-foreground mb-4",children:["No parts are currently available for ",j(),"."]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Check back later or try browsing all available parts."}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(g,{variant:"outline",onClick:()=>d("/"),children:"Browse All Parts"}),e.jsx(g,{onClick:()=>d("/create-product"),children:"Create a Part"})]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:x.map(s=>e.jsx(T,{className:"bg-card border-border hover:border-primary/50 transition-colors group cursor-pointer",onClick:()=>A(s.id),children:e.jsxs(E,{className:"p-0",children:[e.jsxs("div",{className:"aspect-square bg-muted relative overflow-hidden rounded-t-lg",children:[s.image_url?e.jsx(q,{src:s.image_url,alt:s.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(M,{className:"h-12 w-12 text-muted-foreground"})}),s.price&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs(N,{variant:"secondary",className:"bg-background/90 backdrop-blur",children:["$",s.price]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-foreground mb-2 line-clamp-2",children:s.title}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-primary",children:s.creator?.username?.[0]?.toUpperCase()||"U"})}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.creator?.username||"Unknown"})]}),e.jsx(N,{variant:"outline",className:"text-xs",children:s.category||"Part"})]})]})]})},s.id))})]})}export{ee as SearchResultsPage};
