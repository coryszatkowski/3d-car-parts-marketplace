import{j as r}from"./ui-7ID9SH2a.js";import{u as b,S as i,a as u,b as h,c as p,e as y,d as g}from"./useCarCatalog-BxQi0kqV.js";import{b as f}from"./vendor-CDpTtB3_.js";import{q as P,t as l}from"./index-BeUK1Jxh.js";function V({onSelectionChange:m,className:d=""}){const{selection:o,filteredOptions:s,updateSelection:x}=b(),t=(e,j)=>{const C=e==="year"?parseInt(j,10):j;x(e,C),m?.(o)};return r.jsx("div",{className:`space-y-4 ${d}`,children:r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[r.jsxs(i,{value:o.year?.toString()||"",onValueChange:e=>t("year",e),children:[r.jsx(u,{className:"bg-input-background",children:r.jsx(h,{placeholder:"Year"})}),r.jsx(p,{children:y.getAllYears().map(e=>r.jsx(g,{value:e.toString(),children:e},e))})]}),r.jsxs(i,{value:o.make||"",onValueChange:e=>t("make",e),children:[r.jsx(u,{className:"bg-input-background",children:r.jsx(h,{placeholder:"Make"})}),r.jsx(p,{children:s.makes.map(e=>r.jsx(g,{value:e.id,children:e.name},e.id))})]}),r.jsxs(i,{value:o.model||"",onValueChange:e=>t("model",e),children:[r.jsx(u,{className:"bg-input-background",children:r.jsx(h,{placeholder:"Model"})}),r.jsx(p,{children:s.models.map(e=>r.jsx(g,{value:e.id,children:e.name},e.id))})]}),r.jsxs(i,{value:o.trim||"",onValueChange:e=>t("trim",e),children:[r.jsx(u,{className:"bg-input-background",children:r.jsx(h,{placeholder:"Trim"})}),r.jsx(p,{children:s.trims.map(e=>r.jsx(g,{value:e,children:e},e))})]})]})})}function A(){const[m,d]=f.useState([]),[o,s]=f.useState(!1),[x,t]=f.useState(null);return{products:m,loading:o,error:x,fetchCreatorProducts:async c=>{s(!0),t(null);try{const{data:a,error:n}=await P.getCreatorProducts(c);n?(t(n.message),l.error("Failed to load products")):d(a||[])}catch{t("An unexpected error occurred"),l.error("Failed to load products")}finally{s(!1)}},fetchPublishedProducts:async()=>{s(!0),t(null);try{const{data:c,error:a}=await P.getPublishedProducts();a?(t(a.message),l.error("Failed to load products")):d(c||[])}catch{t("An unexpected error occurred"),l.error("Failed to load products")}finally{s(!1)}},deleteProduct:async c=>{try{const{error:a}=await P.deleteProduct(c);a?l.error("Failed to delete product"):(d(n=>n.filter(S=>S.id!==c)),l.success("Product deleted successfully"))}catch{l.error("Failed to delete product")}}}}export{V as C,A as u};
