import{j as s}from"./ui-7ID9SH2a.js";import{u as h,b as m}from"./vendor-CDpTtB3_.js";import{J as l}from"./index-BeUK1Jxh.js";import"./supabase-DAPVm_YM.js";function b(){const r=h();return m.useEffect(()=>{(async()=>{try{const e=new URLSearchParams(window.location.hash.substring(1)),o=e.get("access_token"),t=e.get("refresh_token"),a=e.get("error");if(a){console.error("OAuth error:",a),r("/?error=oauth_error");return}if(o&&t){const{data:i,error:c}=await l.auth.setSession({access_token:o,refresh_token:t});if(c){console.error("Session error:",c),r("/?error=session_error");return}if(i.session){console.log("Successfully authenticated:",i.session.user),window.history.replaceState({},document.title,window.location.pathname),r("/");return}}const{data:u,error:n}=await l.auth.getSession();if(n){console.error("Session error:",n),r("/?error=session_error");return}u.session?r("/"):r("/?error=no_session")}catch(e){console.error("Auth callback error:",e),r("/?error=auth_callback_failed")}})()},[r]),s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Completing sign in..."})]})})}export{b as AuthCallback};
